import { test, expect } from '@playwright/test';

test('Add product to cart', async ({ page }) => {
  // step 1: navigate to the webpage
  await page.goto('https://www.demoblaze.com/');

  // Step 2: select a product from the list
  await page.click('a:has-text("Samsung galaxy s6")');  // Adjust the selector as needed

  // Step 3: click on "Add to cart"
  await page.click('a:has-text("Add to cart")');
  
  // dialog shown
  page.on('dialog', async dialog => {
    expect(dialog.message()).toContain('Product added');
    await dialog.accept();
  });

  // Step 4: navigate to cart and verify product is added
  await page.click('#cartur');
  await page.waitForSelector('.success');

  // verify product is in the cart
  const productName = await page.textContent('.success');
  expect(productName).toContain('Samsung galaxy s6');
});
